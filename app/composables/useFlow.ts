// TODO: all logic of flow operations
